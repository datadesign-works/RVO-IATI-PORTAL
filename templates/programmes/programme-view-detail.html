<div id="main-content" class="activity">

    <div class="container extra">

        <div class="detailview white no-margin-bottom no-padding-bottom">
            <h1 class="no-margin-bottom">{{vm.activity.title.narratives[0].text}}</h1>         
        </div>

        <hr class="darkblue no-margin-bottom">

        <sub-navbar 
            tabs='vm.tabs' 
            selected-tab='vm.selectedTab'>
        </sub-navbar>

    </div>

    <div class="content-offset" ng-show="vm.selectedTab == 'summary'">

        <div class="container extra detailview">

            <div class="row">
                <div class="col-md-8">
                    <div class="white">
                        <h2 class="no-margin-top">Description</h2>
                        <p>{{vm.activity.description[0].narratives[0].text}}</p>              
                    </div>
                    <div class="white">
                        <h2>Related project map</h2>
                    </div>
                    <div class="map">
                        <countries-geo-map map-height='450px' map-legend='false'></countries-geo-map>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="panel lightblue with-pie">
                        <h3>Projects per country</h3>
                        <hr>
                        <oipa-pie-chart group-by="recipient_country" aggregation-key="count" aggregations="count,incoming_fund" has-to-contain="related_activity"></oipa-pie-chart>
                    </div>
                    <div class="panel lightblue" ng-show="vm.programmeUrl">
                        <h3>More information</h3>
                        <hr>
                        <p><a ng-href="{{vm.programmeUrl}}" target="_blank">Visit the programme page on rvo.nl</a></p>
                    </div>
                    <div class="panel lightblue">
                        <h3>Programme updates</h3>
                        <hr>
                        <p>Not yet available</p>
                        <!-- <div class="video">
                            <iframe width="581" height="215" src="https://www.youtube.com/embed/Ygng2822jMQ" frameborder="0" allowfullscreen></iframe>
                        </div>
                        <div class="video">
                            <iframe width="581" height="215" src="https://www.youtube.com/embed/Ygng2822jMQ" frameborder="0" allowfullscreen></iframe>
                        </div> -->
                    </div>
                    <div class="panel lightblue">
                        <h4>Related documents</h4>
                        <hr>
                            <p ng-show="!vm.activity.documents">
                                No documents available.
                            </p>
                            <p ng-repeat="document in vm.activity.documents">
                                <a target="_blank" href="{{document.url}}">
                                    <i class="glyphicon glyphicon-download-alt"></i>{{document.title}}
                                </a>
                            </p>
                    </div>
                    <div class="panel lightblue with-table share">
                        <h3>Export & share</h3>
                        <hr>
                        <table class="no-format">
                            <tr>
                                <td width="130">Download:</td>
                                <td><a ng-click="vm.download('json')"><i class="fa fa-download"></i>JSON</a></td>
                            </tr>
                            <tr>
                                <td>Share:</td>
                                <td>
                                    <a target="_blank" ng-href="http://twitter.com/home?status={{vm.shareDescription}}"><i class="fa fa-twitter-square"></i></a>
                                    <a target="_blank" ng-href="http://www.facebook.com/sharer/sharer.php?s=100&p[url]={{vm.pageUrl}}"><i class="fa fa-facebook-square"></i></a>
                                    <a target="_blank" ng-href="http://www.linkedin.com/shareArticle?mini=true&url={{vm.pageUrl}}&title={{vm.shareDescription}}"><i class="fa fa-linkedin-square"></i></a>
                                    <a href="mailto:?&subject={{vm.shareDescription}}&body={{vm.pageUrl}}"><i class="fa fa-envelope-square"></i></a>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div ng-show="vm.selectedTab == 'activities'">
        <div class="container detailview extra">

            <div class="row">
                <div class="col-md-12">
                    <activity-list 
                        has-to-contain="related_activity_id"  
                        count="vm.tabs[1].count"
                        shown="vm.selectedTab == 'activities'"></activity-list>
                </div>
            </div>
        </div>
    </div>

    <div ng-show="vm.selectedTab == 'countries'">
        <div class="container detailview extra">

            <div class="row">
                <div class="col-md-12">
                    <country-list 
                        has-to-contain="related_activity_id" 
                        count="vm.tabs[2].count"
                        shown="vm.selectedTab == 'countries'"></country-list>
                </div>
            </div>
        </div>
    </div>

    <div ng-show="vm.selectedTab == 'sectors'">
        <div class="container extra detailview">
            <div class="row">
                <div class="col-md-12">

                    <sector-list 
                        has-to-contain="related_activity_id" 
                        count="vm.tabs[3].count"
                        shown="vm.selectedTab == 'sectors'"></sector-list>
                </div>
            </div>
        </div>
    </div>

    <div ng-show="vm.selectedTab == 'implementing-organisations'">
        <div class="container detailview extra">

            <div class="row">
                <div class="col-md-12">
                    <implementing-organisations-list 
                        has-to-contain="related_activity_id" 
                        count="vm.tabs[4].count"
                        shown="vm.selectedTab == 'implementing-organisations'"></implementing-organisations-list>
                </div>
            </div>
        </div>
    </div>

</div>


